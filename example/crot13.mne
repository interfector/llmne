#!/usr/local/bin/llmne -x

_START:

STPUSH $$+1
PUSH STRING

CALL ROT13

STPUSH $$+1
PUSH STRING

CALL PRINT

# ROT13 function starts

ROT13:

STPOP ROT_LOOP
PUSH ROT_LOOP
SUB PP_GAP
POP ROT_PUSH+3
POP ROT_ADD+1

ROT_LOOP:

PUSH ROT_LOOP
CMP NULL
JZ ROT_END

ROT_PUSH:

#CMP ROT_LIMIT
#JM ROT_NORM

#CMP ROT_LIMIT+1
#JG ROT_MIN

#CMP ROT_LIMIT+2
#JM ROT_ADD

#ROT_MIN:

#CMP ROT_LIMIT
#JM ROT_NORM

#CMP ROT_LIMIT+1
#JG ROT_NORM

CMP ROT_LIMIT+2
JM ROT_ADD

SUB ROT

POP ROT_LOOP
JMP ROT_NORM

ROT_ADD:
ADD ROT
POP ROT_LOOP

ROT_NORM:
INC ROT_PUSH+3
INC ROT_ADD+1
INC ROT_LOOP
JMP ROT_LOOP

ROT_END:
RET #0

PP_GAP:
0100

ROT:
0013

ROT_LIMIT:
0097 'a'
0122 'z'
0110 'n'

# ROT13 fucntion ends

# PRINT function starts

PRINT:

DISPLAY CHAR
STPOP PLOOP

PLOOP:

PUSH PLOOP
CMP NULL
JZ ENDP

POP $$+4
WRITE $$+3

INC PLOOP

JMP PLOOP
NOP

NULL:
0000

ENDP:
DISPLAY INT
RET

# PRINT function ends

STRING:
0104 'h'
0101 'e'
0108 'l'
0108 'l'
0111 'o'
0032 ' '
0119 'w'
0111 'o'
0114 'r'
0108 'l'
0100 'd'
0010 '\n'
