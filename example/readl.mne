#!/usr/local/bin/llmne -x

_START:

STPUSH PUSHED
CALL READL

STPUSH PUSHED+1
PUSH STRING

CALL PRINT

EXIT 0

# READL function starts

READL:

DISPLAY CHAR
STPOP LOOP
PUSH LOOP
ADD GAP
POP LOOP+1

LOOP:
READ STRING
PUSH STRING

CMP EOT
JZ END

INC LOOP
INC LOOP+1

JMP LOOP

END:
DISPLAY INT
RET

GAP:
0300 # difference between 'PUSH 00' and 'READ 00'

EOT:
0010

# READL function ends

# PRINT function starts

PRINT:

DISPLAY CHAR
STPOP PLOOP

PLOOP:

PUSH PLOOP
CMP NULL
JZ ENDP

POP $$+4
WRITE $$+3

INC PLOOP

JMP PLOOP
NOP 0

NULL:
0000

ENDP:
DISPLAY INT
RET

# PRINT function ends

PUSHED:
READ STRING
PUSH STRING

STRING:
0000
